# Makefile for Mac Java Application
# ç®€åŒ–æ„å»ºè¿‡ç¨‹çš„ Make é…ç½®æ–‡ä»¶

.PHONY: all clean compile package pkg dmg install run help

# é»˜è®¤ç›®æ ‡
all: package

# å¸®åŠ©ä¿¡æ¯
help:
	@echo "Mac Java Application æ„å»ºå·¥å…·"
	@echo ""
	@echo "å¯ç”¨ç›®æ ‡:"
	@echo "  compile    - ç¼–è¯‘ Java æºä»£ç "
	@echo "  package    - æ‰“åŒ… JAR æ–‡ä»¶"
	@echo "  pkg        - åˆ›å»º PKG å®‰è£…åŒ…"
	@echo "  dmg        - åˆ›å»º DMG ç£ç›˜é•œåƒ"
	@echo "  install    - åˆ›å»ºæ‰€æœ‰å®‰è£…åŒ… (PKG + DMG)"
	@echo "  run        - è¿è¡Œåº”ç”¨ç¨‹åº"
	@echo "  clean      - æ¸…ç†æ„å»ºæ–‡ä»¶"
	@echo "  help       - æ˜¾ç¤ºæ­¤å¸®åŠ©ä¿¡æ¯"

# ç¼–è¯‘é¡¹ç›®
compile:
	@echo "ğŸ”¨ ç¼–è¯‘ Java é¡¹ç›®..."
	mvn clean compile

# æ‰“åŒ… JAR
package: compile
	@echo "ğŸ“¦ æ‰“åŒ… JAR æ–‡ä»¶..."
	mvn package

# åˆ›å»º PKG å®‰è£…åŒ…
pkg: package
	@echo "ğŸ“¦ åˆ›å»º PKG å®‰è£…åŒ…..."
	./build-mac-installer.sh

# åˆ›å»º DMG ç£ç›˜é•œåƒ
dmg: pkg
	@echo "ğŸ’¿ åˆ›å»º DMG ç£ç›˜é•œåƒ..."
	./build-dmg.sh

# åˆ›å»ºæ‰€æœ‰å®‰è£…åŒ…
install: dmg
	@echo "âœ… æ‰€æœ‰å®‰è£…åŒ…åˆ›å»ºå®Œæˆ!"
	@ls -la *.pkg *.dmg 2>/dev/null || true

# è¿è¡Œåº”ç”¨ç¨‹åº
run: package
	@echo "ğŸš€ å¯åŠ¨åº”ç”¨ç¨‹åº..."
	java -jar target/mac-java-app-1.0.0.jar

# æ¸…ç†æ„å»ºæ–‡ä»¶
clean:
	@echo "ğŸ§¹ æ¸…ç†æ„å»ºæ–‡ä»¶..."
	mvn clean
	rm -rf *.pkg *.dmg
	@echo "æ¸…ç†å®Œæˆ!"