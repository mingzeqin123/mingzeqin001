# ç™¾åº¦äº‘æ¨¡å‹ä½¿ç”¨æƒ…å†µç»Ÿè®¡å·¥å…·

è¿™æ˜¯ä¸€ä¸ªç”¨äºç»Ÿè®¡ç™¾åº¦äº‘AIæ¨¡å‹ï¼ˆå¦‚æ–‡å¿ƒä¸€è¨€ã€åƒå¸†å¤§æ¨¡å‹ç­‰ï¼‰ä½¿ç”¨æƒ…å†µçš„Pythonå·¥å…·ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ“Š **ä½¿ç”¨ç»Ÿè®¡**: ç»Ÿè®¡æ¨¡å‹çš„æ€»è¯·æ±‚æ•°ã€Tokenä½¿ç”¨é‡ã€æˆåŠŸç‡ç­‰
- ğŸ“… **æ—¶é—´èŒƒå›´**: æ”¯æŒè‡ªå®šä¹‰æ—¥æœŸèŒƒå›´æŸ¥è¯¢
- ğŸ“ **è¯¦ç»†æ—¥å¿—**: è·å–å…·ä½“çš„ä½¿ç”¨è®°å½•å’Œæ—¥å¿—
- ğŸ“‹ **å¤šæ¨¡å‹æ”¯æŒ**: åŒæ—¶ç»Ÿè®¡å¤šä¸ªæ¨¡å‹çš„ä½¿ç”¨æƒ…å†µ
- ğŸ“„ **æŠ¥å‘Šç”Ÿæˆ**: è‡ªåŠ¨ç”Ÿæˆæ ¼å¼åŒ–çš„ç»Ÿè®¡æŠ¥å‘Š
- ğŸ’¾ **æ–‡ä»¶ä¿å­˜**: å°†æŠ¥å‘Šä¿å­˜ä¸ºæ–‡æœ¬æ–‡ä»¶

## å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

## é…ç½®APIå¯†é’¥

### æ–¹æ³•1: ç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼‰

```bash
export BAIDU_API_KEY=your_api_key_here
export BAIDU_SECRET_KEY=your_secret_key_here
```

### æ–¹æ³•2: ç›´æ¥ä¿®æ”¹ä»£ç 

åœ¨ `baidu_cloud_model_stats.py` ä¸­ç›´æ¥è®¾ç½®ï¼š

```python
api_key = "your_api_key_here"
secret_key = "your_secret_key_here"
```

### æ–¹æ³•3: ä½¿ç”¨é…ç½®æ–‡ä»¶

å¤åˆ¶ `.env.example` ä¸º `.env` å¹¶å¡«å…¥æ‚¨çš„APIå¯†é’¥ã€‚

## å¿«é€Ÿå¼€å§‹

### åŸºç¡€ä½¿ç”¨

```python
from baidu_cloud_model_stats import BaiduCloudAPIClient

# åˆ›å»ºå®¢æˆ·ç«¯
client = BaiduCloudAPIClient(api_key, secret_key)

# è·å–æ¨¡å‹ä½¿ç”¨ç»Ÿè®¡
stats = client.get_model_usage_stats(
    model_name="ernie-bot",
    start_date="2024-01-01",
    end_date="2024-01-07"
)

print(f"æ€»è¯·æ±‚æ•°: {stats.total_requests}")
print(f"æ€»Tokenæ•°: {stats.total_tokens}")
```

### ç”Ÿæˆç»Ÿè®¡æŠ¥å‘Š

```python
from baidu_cloud_model_stats import BaiduCloudAPIClient, ModelStatsReporter

# åˆ›å»ºå®¢æˆ·ç«¯å’ŒæŠ¥å‘Šç”Ÿæˆå™¨
client = BaiduCloudAPIClient(api_key, secret_key)
reporter = ModelStatsReporter(client)

# ç”ŸæˆæŠ¥å‘Š
report = reporter.generate_summary_report(
    model_names=["ernie-bot", "ernie-bot-turbo"],
    days=30
)

print(report)
reporter.save_report_to_file(report)
```

### è¿è¡Œä¸»ç¨‹åº

```bash
python baidu_cloud_model_stats.py
```

## æ”¯æŒçš„æ¨¡å‹

- `ernie-bot` - æ–‡å¿ƒä¸€è¨€åŸºç¡€ç‰ˆ
- `ernie-bot-turbo` - æ–‡å¿ƒä¸€è¨€Turboç‰ˆ
- `ernie-bot-4` - æ–‡å¿ƒä¸€è¨€4.0
- `ernie-bot-8k` - æ–‡å¿ƒä¸€è¨€8Kç‰ˆæœ¬
- `ernie-bot-128k` - æ–‡å¿ƒä¸€è¨€128Kç‰ˆæœ¬
- `ernie-vilg-v2` - æ–‡å¿ƒä¸€æ ¼å›¾åƒç”Ÿæˆ
- `ernie-speed` - æ–‡å¿ƒä¸€è¨€Speedç‰ˆ
- `ernie-speed-128k` - æ–‡å¿ƒä¸€è¨€Speed 128Kç‰ˆ

## APIå‚è€ƒ

### BaiduCloudAPIClient

#### åˆå§‹åŒ–
```python
client = BaiduCloudAPIClient(api_key, secret_key)
```

#### ä¸»è¦æ–¹æ³•

##### get_model_usage_stats()
è·å–æ¨¡å‹ä½¿ç”¨ç»Ÿè®¡ä¿¡æ¯

**å‚æ•°:**
- `model_name` (str): æ¨¡å‹åç§°
- `start_date` (str): å¼€å§‹æ—¥æœŸï¼Œæ ¼å¼ï¼šYYYY-MM-DD
- `end_date` (str): ç»“æŸæ—¥æœŸï¼Œæ ¼å¼ï¼šYYYY-MM-DD

**è¿”å›:**
- `ModelUsageStats`: åŒ…å«ç»Ÿè®¡ä¿¡æ¯çš„å¯¹è±¡

##### get_available_models()
è·å–å¯ç”¨çš„æ¨¡å‹åˆ—è¡¨

**è¿”å›:**
- `List[Dict]`: å¯ç”¨æ¨¡å‹åˆ—è¡¨

##### get_detailed_usage_logs()
è·å–è¯¦ç»†çš„ä½¿ç”¨æ—¥å¿—

**å‚æ•°:**
- `model_name` (str): æ¨¡å‹åç§°
- `start_date` (str): å¼€å§‹æ—¥æœŸ
- `end_date` (str): ç»“æŸæ—¥æœŸ
- `limit` (int): è¿”å›è®°å½•æ•°é™åˆ¶

**è¿”å›:**
- `List[Dict]`: è¯¦ç»†ä½¿ç”¨æ—¥å¿—

### ModelStatsReporter

#### ä¸»è¦æ–¹æ³•

##### generate_summary_report()
ç”Ÿæˆæ±‡æ€»æŠ¥å‘Š

**å‚æ•°:**
- `model_names` (List[str]): è¦ç»Ÿè®¡çš„æ¨¡å‹åç§°åˆ—è¡¨
- `days` (int): ç»Ÿè®¡å¤©æ•°

**è¿”å›:**
- `str`: æ ¼å¼åŒ–çš„æŠ¥å‘Šæ–‡æœ¬

##### save_report_to_file()
ä¿å­˜æŠ¥å‘Šåˆ°æ–‡ä»¶

**å‚æ•°:**
- `report` (str): æŠ¥å‘Šå†…å®¹
- `filename` (str): æ–‡ä»¶å

## ä½¿ç”¨ç¤ºä¾‹

æŸ¥çœ‹ `example_usage.py` æ–‡ä»¶è·å–æ›´å¤šè¯¦ç»†çš„ä½¿ç”¨ç¤ºä¾‹ã€‚

### è¿è¡Œç¤ºä¾‹

```bash
python example_usage.py
```

## è¾“å‡ºç¤ºä¾‹

### ç»Ÿè®¡æŠ¥å‘Šç¤ºä¾‹

```
============================================================
ç™¾åº¦äº‘æ¨¡å‹ä½¿ç”¨æƒ…å†µç»Ÿè®¡æŠ¥å‘Š
============================================================
ç»Ÿè®¡æ—¶é—´èŒƒå›´: 2024-01-01 è‡³ 2024-01-07
ç”Ÿæˆæ—¶é—´: 2024-01-08 10:30:00

æ¨¡å‹åç§°: ernie-bot
  æ€»è¯·æ±‚æ•°: 1,250
  æ€»Tokenæ•°: 45,680
  æˆåŠŸè¯·æ±‚: 1,200
  å¤±è´¥è¯·æ±‚: 50
  å¹³å‡å“åº”æ—¶é—´: 1.25ms
  æˆåŠŸç‡: 96.0%

æ¨¡å‹åç§°: ernie-bot-turbo
  æ€»è¯·æ±‚æ•°: 890
  æ€»Tokenæ•°: 32,150
  æˆåŠŸè¯·æ±‚: 875
  å¤±è´¥è¯·æ±‚: 15
  å¹³å‡å“åº”æ—¶é—´: 0.95ms
  æˆåŠŸç‡: 98.3%

----------------------------------------
æ€»è®¡
----------------------------------------
æ€»è¯·æ±‚æ•°: 2,140
æ€»Tokenæ•°: 77,830
============================================================
```

## é”™è¯¯å¤„ç†

ç¨‹åºåŒ…å«å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼š

- ç½‘ç»œè¯·æ±‚å¤±è´¥è‡ªåŠ¨é‡è¯•
- APIå¯†é’¥éªŒè¯
- æ•°æ®æ ¼å¼éªŒè¯
- è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯æç¤º

## æ³¨æ„äº‹é¡¹

1. **APIå¯†é’¥å®‰å…¨**: è¯·å¦¥å–„ä¿ç®¡æ‚¨çš„APIå¯†é’¥ï¼Œä¸è¦å°†å…¶æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ
2. **è¯·æ±‚é™åˆ¶**: æ³¨æ„ç™¾åº¦äº‘APIçš„è¯·æ±‚é¢‘ç‡é™åˆ¶
3. **æ•°æ®å‡†ç¡®æ€§**: ç»Ÿè®¡æ•°æ®å¯èƒ½å­˜åœ¨å»¶è¿Ÿï¼Œå»ºè®®æŸ¥è¯¢æ—¶åŒ…å«ä¸€å®šçš„ç¼“å†²æ—¶é—´
4. **ç½‘ç»œè¿æ¥**: ç¡®ä¿ç½‘ç»œè¿æ¥ç¨³å®šï¼Œç¨‹åºä¼šè‡ªåŠ¨é‡è¯•å¤±è´¥çš„è¯·æ±‚

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **è·å–è®¿é—®ä»¤ç‰Œå¤±è´¥**
   - æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸

2. **è·å–ç»Ÿè®¡æ•°æ®å¤±è´¥**
   - æ£€æŸ¥æ¨¡å‹åç§°æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤æ—¥æœŸæ ¼å¼ä¸º YYYY-MM-DD
   - éªŒè¯æ˜¯å¦æœ‰æƒé™è®¿é—®è¯¥æ¨¡å‹

3. **ç½‘ç»œè¯·æ±‚è¶…æ—¶**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - å¢åŠ è¯·æ±‚è¶…æ—¶æ—¶é—´

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥æ”¹è¿›è¿™ä¸ªå·¥å…·ã€‚

## æ›´æ–°æ—¥å¿—

### v1.0.0
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- æ”¯æŒåŸºç¡€çš„ä½¿ç”¨ç»Ÿè®¡åŠŸèƒ½
- æ”¯æŒå¤šæ¨¡å‹ç»Ÿè®¡
- æ”¯æŒæŠ¥å‘Šç”Ÿæˆå’Œä¿å­˜